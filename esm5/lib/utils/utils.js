var ɵ0 = function ($element, position) {
    $element.style.left = position.x + 'px';
    $element.style.top = position.y + 'px';
}, ɵ1 = function ($element) {
    $element.style.left = '';
    $element.style.top = '';
}, ɵ2 = function ($element, position) {
    var left = position.x;
    var top = position.y;
    // Replace unitless items with px
    var translate = "translate(" + left + "px," + top + "px)";
    $element.style['transform'] = translate;
    $element.style['WebkitTransform'] = translate;
    $element.style['MozTransform'] = translate;
    $element.style['msTransform'] = translate;
    $element.style['OTransform'] = translate;
}, ɵ3 = function ($element) {
    $element.style['transform'] = '';
    $element.style['WebkitTransform'] = '';
    $element.style['MozTransform'] = '';
    $element.style['msTransform'] = '';
    $element.style['OTransform'] = '';
}, ɵ4 = function () {
    if (document['selection']) {
        document['selection'].empty();
    }
    else if (window.getSelection) {
        window.getSelection().removeAllRanges();
    }
}, ɵ5 = function (element, containerEl) {
    var containerRect = containerEl.getBoundingClientRect();
    var elRect = element.getBoundingClientRect();
    return elRect.left > containerRect.left &&
        elRect.right < containerRect.right &&
        elRect.top > containerRect.top &&
        elRect.bottom < containerRect.bottom;
}, ɵ6 = function (element, containerEl) {
    var containerRect = containerEl.getBoundingClientRect();
    var elRect = element.getBoundingClientRect();
    var elWidth = elRect.right - elRect.left;
    var elHeight = elRect.bottom - elRect.top;
    return (elRect.left + (elWidth / 2)) > containerRect.left &&
        (elRect.right - (elWidth / 2)) < containerRect.right &&
        (elRect.top + (elHeight / 2)) > containerRect.top &&
        (elRect.bottom - (elHeight / 2)) < containerRect.bottom;
}, ɵ7 = function (element, containerEl) {
    var containerRect = containerEl.getBoundingClientRect();
    var elRect = element.getBoundingClientRect();
    return elRect.right > containerRect.left &&
        elRect.bottom > containerRect.top &&
        elRect.left < containerRect.right &&
        elRect.top < containerRect.bottom;
}, ɵ8 = function (event, element) {
    var elRect = element.getBoundingClientRect();
    return event.pageX > elRect.left &&
        event.pageX < elRect.right &&
        event.pageY > elRect.top &&
        event.pageY < elRect.bottom;
}, ɵ9 = function ($element) {
    var styleObj = window.getComputedStyle($element);
    // NOTE: Manually calculating height because IE's `clientHeight` isn't always
    // reliable.
    return parseFloat(styleObj.getPropertyValue('height')) +
        parseFloat(styleObj.getPropertyValue('padding-top')) +
        parseFloat(styleObj.getPropertyValue('padding-bottom'));
}, ɵ10 = function (element, parentElement) {
    var parentElementRect = parentElement.getBoundingClientRect();
    var elementRect = element.getBoundingClientRect();
    return {
        top: elementRect.top - parentElementRect.top,
        left: elementRect.left - parentElementRect.left
    };
};
export var utils = {
    setCssElementPosition: ɵ0,
    resetCSSElementPosition: ɵ1,
    setTransform: ɵ2,
    resetTransform: ɵ3,
    clearSelection: ɵ4,
    isElementFitContainer: ɵ5,
    isElementIntersectContainer: ɵ6,
    isElementTouchContainer: ɵ7,
    isCursorAboveElement: ɵ8,
    getElementOuterHeight: ɵ9,
    getRelativeCoordinates: ɵ10,
    getScrollableContainer: function (node) {
        var regex = /(auto|scroll)/;
        var parents = function (_node, ps) {
            if (_node.parentNode === null) {
                return ps;
            }
            return parents(_node.parentNode, ps.concat([_node]));
        };
        var style = function (_node, prop) {
            return getComputedStyle(_node, null).getPropertyValue(prop);
        };
        var overflow = function (_node) {
            return (style(_node, 'overflow') + style(_node, 'overflow-y') + style(_node, 'overflow-x'));
        };
        var scroll = function (_node) { return regex.test(overflow(_node)); };
        /* eslint-disable consistent-return */
        var scrollParent = function (_node) {
            if (!(_node instanceof HTMLElement || _node instanceof SVGElement)) {
                return;
            }
            var ps = parents(_node.parentNode, []);
            for (var i = 0; i < ps.length; i += 1) {
                if (scroll(ps[i])) {
                    return ps[i];
                }
            }
            return document.scrollingElement || document.documentElement;
        };
        return scrollParent(node);
    }
};
export { ɵ0, ɵ1, ɵ2, ɵ3, ɵ4, ɵ5, ɵ6, ɵ7, ɵ8, ɵ9, ɵ10 };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9hbmd1bGFyMmdyaWRzdGVyLyIsInNvdXJjZXMiOlsibGliL3V0aWxzL3V0aWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJTQUkyQixVQUFVLFFBQXFCLEVBQUUsUUFBZ0M7SUFDcEYsUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLEdBQUcsUUFBUSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDeEMsUUFBUSxDQUFDLEtBQUssQ0FBQyxHQUFHLEdBQUcsUUFBUSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUM7QUFDM0MsQ0FBQyxPQUN3QixVQUFVLFFBQXFCO0lBQ3BELFFBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQztJQUN6QixRQUFRLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUM7QUFDNUIsQ0FBQyxPQUNhLFVBQVUsUUFBcUIsRUFBRSxRQUFnQztJQUMzRSxJQUFNLElBQUksR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDO0lBQ3hCLElBQU0sR0FBRyxHQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUM7SUFFdkIsaUNBQWlDO0lBQ2pDLElBQU0sU0FBUyxHQUFHLGVBQWEsSUFBSSxXQUFNLEdBQUcsUUFBSyxDQUFDO0lBRWxELFFBQVEsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLEdBQUcsU0FBUyxDQUFDO0lBQ2xDLFFBQVEsQ0FBQyxLQUFNLENBQUMsaUJBQWlCLENBQUMsR0FBRyxTQUFTLENBQUM7SUFDL0MsUUFBUSxDQUFDLEtBQU0sQ0FBQyxjQUFjLENBQUMsR0FBRyxTQUFTLENBQUM7SUFDNUMsUUFBUSxDQUFDLEtBQU0sQ0FBQyxhQUFhLENBQUMsR0FBRyxTQUFTLENBQUM7SUFDM0MsUUFBUSxDQUFDLEtBQU0sQ0FBQyxZQUFZLENBQUMsR0FBRyxTQUFTLENBQUM7QUFDcEQsQ0FBQyxPQUNlLFVBQVUsUUFBcUI7SUFDM0MsUUFBUSxDQUFDLEtBQUssQ0FBQyxX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Q0FBQyxFQUFFO2dCQUNuQyxJQUFJLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtvQkFDZixPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztpQkFDaEI7YUFDSjtZQUVELE9BQU8sUUFBUSxDQUFDLGdCQUFnQixJQUFJLFFBQVEsQ0FBQyxlQUFlLENBQUM7UUFDakUsQ0FBQyxDQUFDO1FBRUYsT0FBTyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDOUIsQ0FBQztDQUNKLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCB7IERyYWdnYWJsZUV2ZW50IH0gZnJvbSAnLi9EcmFnZ2FibGVFdmVudCc7XG5cbmV4cG9ydCBjb25zdCB1dGlscyA9IHtcbiAgICBzZXRDc3NFbGVtZW50UG9zaXRpb246IGZ1bmN0aW9uICgkZWxlbWVudDogSFRNTEVsZW1lbnQsIHBvc2l0aW9uOiB7eDogbnVtYmVyLCB5OiBudW1iZXJ9KSB7XG4gICAgICAgICRlbGVtZW50LnN0eWxlLmxlZnQgPSBwb3NpdGlvbi54ICsgJ3B4JztcbiAgICAgICAgJGVsZW1lbnQuc3R5bGUudG9wID0gcG9zaXRpb24ueSArICdweCc7XG4gICAgfSxcbiAgICByZXNldENTU0VsZW1lbnRQb3NpdGlvbjogZnVuY3Rpb24gKCRlbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgICAkZWxlbWVudC5zdHlsZS5sZWZ0ID0gJyc7XG4gICAgICAgICRlbGVtZW50LnN0eWxlLnRvcCA9ICcnO1xuICAgIH0sXG4gICAgc2V0VHJhbnNmb3JtOiBmdW5jdGlvbiAoJGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBwb3NpdGlvbjoge3g6IG51bWJlciwgeTogbnVtYmVyfSkge1xuICAgICAgICBjb25zdCBsZWZ0ID0gcG9zaXRpb24ueDtcbiAgICAgICAgY29uc3QgdG9wID0gcG9zaXRpb24ueTtcblxuICAgICAgICAvLyBSZXBsYWNlIHVuaXRsZXNzIGl0ZW1zIHdpdGggcHhcbiAgICAgICAgY29uc3QgdHJhbnNsYXRlID0gYHRyYW5zbGF0ZSgke2xlZnR9cHgsJHt0b3B9cHgpYDtcblxuICAgICAgICAkZWxlbWVudC5zdHlsZVsndHJhbnNmb3JtJ10gPSB0cmFuc2xhdGU7XG4gICAgICAgICg8YW55PiRlbGVtZW50LnN0eWxlKVsnV2Via2l0VHJhbnNmb3JtJ10gPSB0cmFuc2xhdGU7XG4gICAgICAgICg8YW55PiRlbGVtZW50LnN0eWxlKVsnTW96VHJhbnNmb3JtJ10gPSB0cmFuc2xhdGU7XG4gICAgICAgICg8YW55PiRlbGVtZW50LnN0eWxlKVsnbXNUcmFuc2Zvcm0nXSA9IHRyYW5zbGF0ZTtcbiAgICAgICAgKDxhbnk+JGVsZW1lbnQuc3R5bGUpWydPVHJhbnNmb3JtJ10gPSB0cmFuc2xhdGU7XG4gICAgfSxcbiAgICByZXNldFRyYW5zZm9ybTogZnVuY3Rpb24gKCRlbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgICAkZWxlbWVudC5zdHlsZVsndHJhbnNmb3JtJ10gPSAnJztcbiAgICAgICAgKDxhbnk+JGVsZW1lbnQuc3R5bGUpWydXZWJraXRUcmFuc2Zvcm0nXSA9ICcnO1xuICAgICAgICAoPGFueT4kZWxlbWVudC5zdHlsZSlbJ01velRyYW5zZm9ybSddID0gJyc7XG4gICAgICAgICg8YW55PiRlbGVtZW50LnN0eWxlKVsnbXNUcmFuc2Zvcm0nXSA9ICcnO1xuICAgICAgICAoPGFueT4kZWxlbWVudC5zdHlsZSlbJ09UcmFuc2Zvcm0nXSA9ICcnO1xuICAgIH0sXG4gICAgY2xlYXJTZWxlY3Rpb246ICgpID0+IHtcbiAgICAgICAgaWYgKCg8YW55PmRvY3VtZW50KVsnc2VsZWN0aW9uJ10pIHtcbiAgICAgICAgICAgICg8YW55PmRvY3VtZW50KVsnc2VsZWN0aW9uJ10uZW1wdHkoKTtcbiAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cuZ2V0U2VsZWN0aW9uKSB7XG4gICAgICAgICAgICB3aW5kb3cuZ2V0U2VsZWN0aW9uKCkucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGlzRWxlbWVudEZpdENvbnRhaW5lcjogZnVuY3Rpb24gKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyUmVjdCA9IGNvbnRhaW5lckVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBjb25zdCBlbFJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgIHJldHVybiBlbFJlY3QubGVmdCA+IGNvbnRhaW5lclJlY3QubGVmdCAmJlxuICAgICAgICAgICAgZWxSZWN0LnJpZ2h0IDwgY29udGFpbmVyUmVjdC5yaWdodCAmJlxuICAgICAgICAgICAgZWxSZWN0LnRvcCA+IGNvbnRhaW5lclJlY3QudG9wICYmXG4gICAgICAgICAgICBlbFJlY3QuYm90dG9tIDwgY29udGFpbmVyUmVjdC5ib3R0b207XG4gICAgfSxcbiAgICBpc0VsZW1lbnRJbnRlcnNlY3RDb250YWluZXI6IGZ1bmN0aW9uIChlbGVtZW50OiBIVE1MRWxlbWVudCwgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lclJlY3QgPSBjb250YWluZXJFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgY29uc3QgZWxSZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICBjb25zdCBlbFdpZHRoID0gZWxSZWN0LnJpZ2h0IC0gZWxSZWN0LmxlZnQ7XG4gICAgICAgIGNvbnN0IGVsSGVpZ2h0ID0gZWxSZWN0LmJvdHRvbSAtIGVsUmVjdC50b3A7XG5cbiAgICAgICAgcmV0dXJuIChlbFJlY3QubGVmdCArIChlbFdpZHRoIC8gMikpID4gY29udGFpbmVyUmVjdC5sZWZ0ICYmXG4gICAgICAgICAgICAoZWxSZWN0LnJpZ2h0IC0gKGVsV2lkdGggLyAyKSkgPCBjb250YWluZXJSZWN0LnJpZ2h0ICYmXG4gICAgICAgICAgICAoZWxSZWN0LnRvcCArIChlbEhlaWdodCAvIDIpKSA+IGNvbnRhaW5lclJlY3QudG9wICYmXG4gICAgICAgICAgICAoZWxSZWN0LmJvdHRvbSAtIChlbEhlaWdodCAvIDIpKSA8IGNvbnRhaW5lclJlY3QuYm90dG9tO1xuICAgIH0sXG4gICAgaXNFbGVtZW50VG91Y2hDb250YWluZXI6IGZ1bmN0aW9uIChlbGVtZW50OiBIVE1MRWxlbWVudCwgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lclJlY3QgPSBjb250YWluZXJFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgY29uc3QgZWxSZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICByZXR1cm4gZWxSZWN0LnJpZ2h0ID4gY29udGFpbmVyUmVjdC5sZWZ0ICYmXG4gICAgICAgICAgICBlbFJlY3QuYm90dG9tID4gY29udGFpbmVyUmVjdC50b3AgJiZcbiAgICAgICAgICAgIGVsUmVjdC5sZWZ0IDwgY29udGFpbmVyUmVjdC5yaWdodCAmJlxuICAgICAgICAgICAgZWxSZWN0LnRvcCA8IGNvbnRhaW5lclJlY3QuYm90dG9tO1xuICAgIH0sXG4gICAgaXNDdXJzb3JBYm92ZUVsZW1lbnQ6IGZ1bmN0aW9uIChldmVudDogRHJhZ2dhYmxlRXZlbnQsIGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGVsUmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgICAgcmV0dXJuIGV2ZW50LnBhZ2VYID4gZWxSZWN0LmxlZnQgJiZcbiAgICAgICAgICAgIGV2ZW50LnBhZ2VYIDwgZWxSZWN0LnJpZ2h0ICYmXG4gICAgICAgICAgICBldmVudC5wYWdlWSA+IGVsUmVjdC50b3AgJiZcbiAgICAgICAgICAgIGV2ZW50LnBhZ2VZIDwgZWxSZWN0LmJvdHRvbTtcbiAgICB9LFxuICAgIGdldEVsZW1lbnRPdXRlckhlaWdodDogZnVuY3Rpb24gKCRlbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBjb25zdCBzdHlsZU9iaiA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCRlbGVtZW50KTtcbiAgICAgICAgLy8gTk9URTogTWFudWFsbHkgY2FsY3VsYXRpbmcgaGVpZ2h0IGJlY2F1c2UgSUUncyBgY2xpZW50SGVpZ2h0YCBpc24ndCBhbHdheXNcbiAgICAgICAgLy8gcmVsaWFibGUuXG4gICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHN0eWxlT2JqLmdldFByb3BlcnR5VmFsdWUoJ2hlaWdodCcpKSArXG4gICAgICAgICAgICBwYXJzZUZsb2F0KHN0eWxlT2JqLmdldFByb3BlcnR5VmFsdWUoJ3BhZGRpbmctdG9wJykpICtcbiAgICAgICAgICAgIHBhcnNlRmxvYXQoc3R5bGVPYmouZ2V0UHJvcGVydHlWYWx1ZSgncGFkZGluZy1ib3R0b20nKSk7XG4gICAgfSxcbiAgICBnZXRSZWxhdGl2ZUNvb3JkaW5hdGVzOiAoZWxlbWVudDogSFRNTEVsZW1lbnQsIHBhcmVudEVsZW1lbnQ6IEhUTUxFbGVtZW50KToge3RvcDogbnVtYmVyLCBsZWZ0OiBudW1iZXJ9ID0+IHtcbiAgICAgICAgY29uc3QgcGFyZW50RWxlbWVudFJlY3QgPSBwYXJlbnRFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBjb25zdCBlbGVtZW50UmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRvcDogZWxlbWVudFJlY3QudG9wIC0gcGFyZW50RWxlbWVudFJlY3QudG9wLFxuICAgICAgICAgICAgbGVmdDogZWxlbWVudFJlY3QubGVmdCAtIHBhcmVudEVsZW1lbnRSZWN0LmxlZnRcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIGdldFNjcm9sbGFibGVDb250YWluZXIobm9kZSkge1xuICAgICAgICBjb25zdCByZWdleCA9IC8oYXV0b3xzY3JvbGwpLztcbiAgICAgICAgY29uc3QgcGFyZW50cyA9IChfbm9kZSwgcHMpID0+IHtcbiAgICAgICAgICAgIGlmIChfbm9kZS5wYXJlbnROb2RlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHBhcmVudHMoX25vZGUucGFyZW50Tm9kZSwgcHMuY29uY2F0KFtfbm9kZV0pKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBzdHlsZSA9IChfbm9kZSwgcHJvcCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGdldENvbXB1dGVkU3R5bGUoX25vZGUsIG51bGwpLmdldFByb3BlcnR5VmFsdWUocHJvcCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG92ZXJmbG93ID0gX25vZGUgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICBzdHlsZShfbm9kZSwgJ292ZXJmbG93JykgKyBzdHlsZShfbm9kZSwgJ292ZXJmbG93LXknKSArIHN0eWxlKF9ub2RlLCAnb3ZlcmZsb3cteCcpXG4gICAgICAgICAgICApO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBzY3JvbGwgPSBfbm9kZSA9PiByZWdleC50ZXN0KG92ZXJmbG93KF9ub2RlKSk7XG5cbiAgICAgICAgLyogZXNsaW50LWRpc2FibGUgY29uc2lzdGVudC1yZXR1cm4gKi9cbiAgICAgICAgY29uc3Qgc2Nyb2xsUGFyZW50ID0gX25vZGUgPT4ge1xuICAgICAgICAgICAgaWYgKCEoX25vZGUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCB8fCBfbm9kZSBpbnN0YW5jZW9mIFNWR0VsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBwcyA9IHBhcmVudHMoX25vZGUucGFyZW50Tm9kZSwgW10pO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNjcm9sbChwc1tpXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBzW2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50LnNjcm9sbGluZ0VsZW1lbnQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBzY3JvbGxQYXJlbnQobm9kZSk7XG4gICAgfVxufTtcbiJdfQ==